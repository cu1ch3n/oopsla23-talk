
\newcommand\name{$F^{b}_{\le}$\xspace}
\newcommand\elementary{$F^{e}_{\le}$\xspace}
\newcommand\mynote[3]{\textcolor{#2}{#1: #3}}

%\newcommand\mynote[3]{}

\newcommand\bruno[1]{~\mynote{Bruno}{DeepSkyBlue}{#1}}
\newcommand\shengyi[1]{~\mynote{Shengyi}{teal}{#1}}
\newcommand\chen[1]{~\mynote{Chen}{MediumBlue}{#1}}

\newcommand\catenate{\mathbin{\text{\ttfamily\upshape ++}}}

\newcommand\wh{\widehat}

\newcommand{\hquad}{\hspace{0.5em}} % half quad

\newcommand\jg{\omega}                                 % judgment
\newcommand\toto{\rightrightarrows}
\newcommand\To{\Rightarrow}                            % =>
\newcommand\Lto{\Leftarrow}                            % <=
\newcommand\TTo{\mathrel{\mathrlap{\To}\phantom{~}\To}}  % =>>
\newcommand\sto{\rightsquigarrow}
\newcommand\tto{\rightarrowtail}
\newcommand{\elaborate}{\hookrightarrow}
% \newcommand{\elb}[1]{{\setlength\fboxsep{0.5pt}~\colorbox{black!10}{\strut~${\elaborate #1}$~}}}
\newcommand{\elb}[1]{}

\newcommand{\textmintinline}[2]{\text{\mintinline{#1}{#2}}}
\newcommand{\elab}[1]{{\setlength\fboxsep{0.5pt}~\colorbox{white}{\strut~${\elaborate #1}$~}}}

\newcommand\Gm{\Gamma}
\newcommand\Om{\Omega}

\newcommand\nil\cdot

% just to fool TexStudio
% \providecommand\inferrule{}

\makeatletter
\let\originferrule\inferrule
\DeclareDocumentCommand \inferrule { s O {} m m o }{%
  \IfBooleanTF{#1}%
  {%
    \mpr@inferstar@[#2]{#3}{#4}%
  }{%
    \mpr@inferrule[#2]{#3}{#4}%
  }%
  \IfValueT{#5}%
  {%
    % #5%
    \my@name@inferrule{#5}%
  }%
}
\NewDocumentCommand \my@name@inferrule { m }{%
  \def\@currentlabelname{\ensuremath{#1}}%
}
\makeatother

% \makeatletter
% \newcommand{\dummylabel}[2]{\def\@currentlabel{#2}\label{#1}}
% \makeatother

\makeatletter
\newcommand{\setword}[2]{%
  \phantomsection
  #1\def\@currentlabel{\unexpanded{#1}}\label{#2}%
}
\makeatother

\makeatletter
\zref@newprop{MyPlainCntValue}{\the\value{\zref@getcurrent{counter}}}%

\newcommand\Mylabel[1]{%
  \zref@labelbyprops{#1}{MyPlainCntValue}%
  \label{#1}%
}%
%
%% This is used for referencing saved MyPlainCntValue-property-values 
%% of zref-labels:
\newcommand\MyPlainCntValueRef[1]{%
  \zref[MyPlainCntValue]{#1}%
}%
\makeatother

\makeatletter
\newcounter{algRuleCounter}
\DeclareDocumentCommand \algrule { o }
{\stepcounter{algRuleCounter}
  \rrule{\arabic{algRuleCounter}}
}
\NewDocumentCommand \my@name@algrule { m }{%
  \def\@currentlabelname{\ensuremath{#1}}%
}
\makeatother

\makeatletter
\newcounter{nalgRuleCounter}
\DeclareDocumentCommand \nalgrule { m }
{\refstepcounter{nalgRuleCounter}
  \rrule{\arabic{nalgRuleCounter}}\Mylabel{#1}
}
\makeatother
\newcommand\refalgrule[1]{\hyperref[#1]{\MyPlainCntValueRef{#1}}}

\newcommand\rto{\longrightarrow}                % "reduce to" arrow ---`
\newcommand\redto{\longrightarrow^*}            % ---`*
\newcommand\rrule[1]{~\longrightarrow_{\makebox[0pt][l]{$\scriptstyle#1$}\hphantom{00}}}

\newcommand\jExt{\rightharpoonup}

\newcommand{\tRed}[1]{\textcolor{Salmon}{#1}}

\newcommand{\lam}{} %[2]{\lambda {#1}.~{#2}}
\RenewDocumentCommand \lam {O{x} m} {\ensuremath{\lambda {#1}.~{#2}}}  % \lambda x.~e --- x is optional. \lam[x]{e}

\newcommand{\tlam}{} %[2]{\lambda {#1}.~{#2}}
\RenewDocumentCommand \tlam  {O{\ta} O{B} m} {\ensuremath{\Lambda ({#1}\le {#2}).~{#3}}}  % \lambda x.~e --- x is optional. \lam[x]{e}

\newcommand{\tlamf}{} %[2]{\lambda {#1}.~{#2}}
\RenewDocumentCommand \tlamf  {O{\ta} m} {\ensuremath{\Lambda {#1}.~{#2}}}  % \lambda x.~e --- x is optional. \lam[x]{e}

\newcommand{\all}{} %[2]{\forall {#1}.~{#2}}
\RenewDocumentCommand \all {O{\ta} O{B} m} {\forall ({#1}\le {#2}).~{#3}}  % \forall a.~A --- a is optional. \all[a]{A}

\newcommand{\allf}{} %[2]{\forall {#1}.~{#2}}
\RenewDocumentCommand \allf {O{\ta} m} {\forall {#1}.~{#2}}  % \

\newcommand{\appInf}[3]{{#1}\bullet{#2}\TTo{#3}}
\newcommand{\appInfAlg}{} %[4]{{#1}\bullet{#2}\TTo_{#3} {#4}}
\newcommand{\absInfAlg}{} %[4]{{#1}\bullet{#2}\TTo_{#3} {#4}}
\NewDocumentCommand \infAlg {O{e} O{\ca} O{\jg}} {{#1}\To_{#2} {#3}}
\RenewDocumentCommand \appInfAlg {m m O{\ca} O{\jg}} {{#1}\bullet{#2}\TTo_{#3} {#4}}
\NewDocumentCommand \tappInfAlg {m m O{\ca} O{\jg}} {{#1}\circ{#2}\TTo_{#3} {#4}}
\RenewDocumentCommand \absInfAlg {O{A} O{\ca} O{\cb} O{\jg}} {{#1}\triangleright_{#2, #3} {#4}}
\newcommand{\tappInf}[3]{{#1}\circ{#2}\TTo{#3}}
\newcommand{\absInf}[3]{{#1}\triangleright{#2}\to{#3}}
% \newcommand{\appInfAlg}{} %[4]{{#1}\bullet{#2}\TTo_{#3} {#4}}
\RenewDocumentCommand \appInfAlg {O{A\to B} O{e} O{\ca} O{\jg}} {{#1}\bullet{#2}\TTo_{#3} {#4}}
% \NewDocumentCommand \tyInfAlg {m m O{a} O{\jg}} {{#1}\circ{#2}\TTo_{#3} {#4}}

\newcommand\ua{}
\newcommand\ub{}
\newcommand\ea{}
\newcommand\eb{}
\newcommand\ta{}
\newcommand\tb{}
\newcommand\sta{}
\newcommand\stb{}

\newcommand\ca{}
\newcommand\cb{}
\newcommand\cc{}
\newcommand\cd{}

\RenewDocumentCommand \ea {O{}} {\ensuremath{\wh\alpha_{#1}}}   % \widehat{\alpha} --- subscript is optional \al[1]
\RenewDocumentCommand \eb {O{}} {\ensuremath{\wh\beta_{#1}}}    % \widehat{\beta}

\RenewDocumentCommand \ua {O{}} {a_{#1}}   % \widehat{\alpha} --- subscript is optional \al[1]
\RenewDocumentCommand \ub {O{}} {b_{#1}}

\RenewDocumentCommand \ta {O{}} {a_{#1}}   % \widehat{\alpha} --- subscript is optional \al[1]
\RenewDocumentCommand \tb {O{}} {b_{#1}}    % \widehat{\beta}

\RenewDocumentCommand \sta {O{}} {\tilde a_{#1}}   % \widehat{\alpha} --- subscript is optional \al[1]
\RenewDocumentCommand \stb {O{}} {\tilde b_{#1}}

% \RenewDocumentCommand \ca {O{}} { \mathtt{?}a_{#1}}   % \widehat{\alpha} --- subscript is optional \al[1]
% \RenewDocumentCommand \cb {O{}} { \mathtt{?}b_{#1}}   
% \RenewDocumentCommand \cc {O{}} { \mathtt{?}c_{#1}}   

\RenewDocumentCommand \ca {O{}} { a_{#1}}   % \widehat{\alpha} --- subscript is optional \al[1]
\RenewDocumentCommand \cb {O{}} { b_{#1}}
\RenewDocumentCommand \cc {O{}} { c_{#1}}
\RenewDocumentCommand \cd {O{}} { d_{#1}}

\newcommand{\blue}[1]{\textcolor{blue}{#1}}

\newcommand{\newpageVMiddle}[1]{\null\vfill{#1}\vfill}

% \newcommand{\newRule}[1]{\textcolor{purple}{  #1}}

% \newcommand{\reducedstrut}{\vrule width 0pt height \ht\strutbox depth \dp\strutbox\relax}

\newcommand{\mystruct}{\vrule width 0pt height .92\ht\strutbox depth .92\dp\strutbox\relax}

\newcommand{\newRule}[1]{{\setlength\fboxsep{0.3pt}\hspace{-\fboxsep}\colorbox{black!20}{\mystruct$~{#1}~$}}}% % \newcommand{\newRule}[1]{\colorbox{black!20}{\ensuremath{#1}}}

\definecolor{commentgreen}{rgb}{0,0.6,0}

\newcommand{\tint}{\textmintinline{ocaml}{Int}}
\newcommand{\tbool}{\textmintinline{ocaml}{Bool}}
\newcommand{\tshape}{\textmintinline{ocaml}{Shape}}
\newcommand{\tcircle}{\textmintinline{ocaml}{Circle}}

\newcommand{\java}[1]{\lstinline[language=java]{#1}}
\newcommand{\haskell}[1]{\lstinline[language=haskell]{#1}}

\makeatletter
\newcommand{\oset}[3][0ex]{%
  \mathrel{\mathop{#3}\limits^{
      \vbox to#1{\kern-2\ex@
        \hbox{$\scriptstyle#2$}\vss}}}}
\makeatother

% \newcommand{\ule}{\bar{\le}}
% \newcommand{\sle}{\mathrel{\stackrel{\sim}{\le}}}
% \newcommand{\sle}{\ensuremath{~\tilde{\le}~}}
\newcommand{\sle}{\ensuremath{\lesssim}}
\newcommand{\ule}{\mathrel{\raisebox{-0.3ex}{\ensuremath{\oset{<}{\scriptstyle \simeq}}}}}
\newcommand{\tenv}{\Delta}

\newenvironment{mathparshrink}
{\begin{@empty}%
    \def \MathparLineskip {\lineskip=0.4em}%
    % \setstretch{0.7}
    % \setlength{\abovedisplayskip}{5pt}
    % \setlength{\belowdisplayskip}{5pt}
    \begin{mathpar}}
      {\end{mathpar}\end{@empty}}

\newcommand{\mtext}[1]{\text{\mintinline{text}{#1}}}
\newcommand{\scala}[1]{\text{\mintinline{scala}{#1}}}
\newcommand{\ocaml}{\mintinline{ocaml}}

\newcommand{\cmark}{\textcolor{mLightGreen}{\ding{51}}}%
\newcommand{\xmark}{\textcolor{mLightBrown}{\ding{55}}}%
\newcommand{\highlight}{\colorbox{lightgray}}
\newcommand{\nl}{\textCR}
